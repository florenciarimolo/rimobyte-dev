---
import MainLayout from '@/layouts/MainLayout.astro';
import MigrationLandingPage from '@/components/MigrationLandingPage';
import MigrationStructuredData from '@/components/migration-landing/MigrationStructuredData.astro';
import { LANG, getI18N } from '@/i18n/index';
import { SITE_URL } from '@/constants';

const locale = LANG.ENGLISH;
const translations = getI18N({ currentLocale: locale });

const currentUrl = `${SITE_URL}${Astro.url.pathname}`;
const title = `${translations.migrationLanding.hero.title} | RimoByte`;
const description = translations.migrationLanding.hero.subtitle;

// Get reCAPTCHA site key from environment variable
const recaptchaSiteKey = import.meta.env.RECAPTCHA_SITE_KEY || '6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI';

// FAQ Schema for AI discoverability
const faqItems = [
  { question: translations.migrationLanding.faq.items.contentLoss.question, answer: translations.migrationLanding.faq.items.contentLoss.answer },
  { question: translations.migrationLanding.faq.items.changeHosting.question, answer: translations.migrationLanding.faq.items.changeHosting.answer },
  { question: translations.migrationLanding.faq.items.agencyWebs.question, answer: translations.migrationLanding.faq.items.agencyWebs.answer },
  { question: translations.migrationLanding.faq.items.canMaintain.question, answer: translations.migrationLanding.faq.items.canMaintain.answer },
];
---

<MainLayout 
  title={title}
  description={description}
  locale={locale}
>
  <MigrationStructuredData 
    url={currentUrl}
    city={null}
    locale={locale}
  />
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": faqItems.map(faq => ({
      "@type": "Question",
      "name": faq.question,
      "acceptedAnswer": { "@type": "Answer", "text": faq.answer }
    }))
  })} />
  <MigrationLandingPage client:only="react" recaptchaSiteKey={recaptchaSiteKey} initialLocale={locale} />
</MainLayout>
