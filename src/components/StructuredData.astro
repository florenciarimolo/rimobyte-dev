---
import { getI18N } from '@/i18n/index';

export interface Props {
  type: 'person' | 'website' | 'professionalService';
  locale?: string;
}

const { type, locale = 'es' } = Astro.props;
const siteUrl = 'https://rimobyte.com';
const translations = getI18N({ currentLocale: locale });

let structuredData: any = {};

if (type === 'person') {
  structuredData = {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Florencia Rímolo",
    "alternateName": "RimoByte",
    "url": siteUrl,
    "image": `${siteUrl}/assets/images/programadora-web.webp`,
    "jobTitle": locale === 'es' ? "Desarrolladora Full Stack" : "Full Stack Developer",
    "worksFor": {
      "@type": "Organization",
      "name": "RimoByte"
    },
    "sameAs": [
      "https://github.com/rimobyte",
      "https://linkedin.com/in/florencia-rimolofigueira",
      "https://x.com/rimobyte"
    ],
    "email": "info@rimobyte.com",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "ES",
      "addressLocality": "Barcelona"
    },
    "knowsAbout": [
      "Full Stack Development",
      "WordPress Development",
      "Vue.js",
      "React",
      "Django",
      "Spring Boot",
      "E-commerce Development",
      "Web Development",
      "JavaScript",
      "TypeScript",
      "Python",
      "Java"
    ]
  };
} else if (type === 'website') {
  structuredData = {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "RimoByte",
    "url": siteUrl,
    "description": locale === 'es' 
      ? "Portfolio de Florencia Rímolo - Desarrolladora Full Stack especializada en WordPress, Vue.js, Django y desarrollo de e-commerce"
      : "Florencia Rímolo's Portfolio - Full Stack Developer specialized in WordPress, Vue.js, Django and e-commerce development",
    "author": {
      "@type": "Person",
      "name": "Florencia Rímolo"
    },
    "inLanguage": locale === 'es' ? "es-ES" : "en-US",
    "potentialAction": {
      "@type": "SearchAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": `${siteUrl}/?q={search_term_string}`
      },
      "query-input": "required name=search_term_string"
    }
  };
} else if (type === 'professionalService') {
  // General services for the main portfolio page
  const generalServices = [
    {
      name: locale === 'es' ? "Desarrollo WordPress" : "WordPress Development",
      description: locale === 'es' 
        ? "Desarrollo de sitios web corporativos, e-commerce y mantenimiento WordPress"
        : "Corporate website development, e-commerce and WordPress maintenance"
    },
    {
      name: locale === 'es' ? "Desarrollo Full Stack" : "Full Stack Development",
      description: locale === 'es'
        ? "Desarrollo de aplicaciones web completas con Vue.js, React, Django y Spring Boot"
        : "Complete web application development with Vue.js, React, Django and Spring Boot"
    },
    {
      name: locale === 'es' ? "Desarrollo E-commerce" : "E-commerce Development",
      description: locale === 'es'
        ? "Tiendas online personalizadas y optimizadas para cada negocio"
        : "Customized and optimized online stores for each business"
    },
    {
      name: locale === 'es' ? "Aplicaciones Web" : "Web Applications",
      description: locale === 'es'
        ? "Desarrollo de aplicaciones web modernas y escalables"
        : "Development of modern and scalable web applications"
    },
    {
      name: locale === 'es' ? "Consultoría y Soporte" : "Consulting and Support",
      description: locale === 'es'
        ? "Asesoramiento técnico, migraciones y mejoras de proyectos existentes"
        : "Technical consulting, migrations and improvements of existing projects"
    }
  ];

  const serviceItems = generalServices.map((service) => ({
    "@type": "Service",
    "name": service.name,
    "description": service.description,
    "provider": {
      "@type": "Person",
      "name": "Florencia Rímolo"
    }
  }));

  structuredData = {
    "@context": "https://schema.org",
    "@type": "ProfessionalService",
    "name": "RimoByte",
    "description": locale === 'es'
      ? "Servicios de desarrollo web full stack: WordPress, Vue.js, Django, e-commerce, aplicaciones web y móviles"
      : "Full stack web development services: WordPress, Vue.js, Django, e-commerce, web and mobile applications",
    "url": siteUrl,
    "image": `${siteUrl}/assets/images/programadora-web.webp`,
    "provider": {
      "@type": "Person",
      "name": "Florencia Rímolo",
      "jobTitle": locale === 'es' ? "Desarrolladora Full Stack" : "Full Stack Developer",
      "email": "info@rimobyte.com"
    },
    "areaServed": {
      "@type": "Country",
      "name": "Spain"
    },
    "serviceType": [
      locale === 'es' ? "Desarrollo Web Full Stack" : "Full Stack Web Development",
      locale === 'es' ? "Desarrollo WordPress" : "WordPress Development",
      locale === 'es' ? "Desarrollo E-commerce" : "E-commerce Development",
      locale === 'es' ? "Desarrollo de Aplicaciones Web" : "Web Application Development"
    ],
    "priceRange": "$$",
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": locale === 'es' 
        ? "Servicios de Desarrollo Web"
        : "Web Development Services",
      "itemListElement": serviceItems.map((service, index) => ({
        "@type": "OfferCatalogItem",
        "position": index + 1,
        "itemOffered": service
      }))
    }
  };
}

const jsonLd = JSON.stringify(structuredData);
---

<script type="application/ld+json" set:html={jsonLd} is:inline />

